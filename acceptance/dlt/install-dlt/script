trace errcode $CLI install-dlt
"$DLT" init

# Add debug line to show CLI value
for ((i=0; i<${#CLI}; i++)); do
    echo -n "${CLI:$i:1} "
done
echo

title "dlt file exists, should not overwrite"
mkdir -p tmpdir
touch tmpdir/dlt
trace errcode $CLI install-dlt -d tmpdir
if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "cygwin" || "$OSTYPE" == "win32" ]]; then
    echo "$DLT -> ${$(realpath "$DLT")%.exe}"
else
    echo "$DLT -> $(realpath "$DLT")"
fi
rm -rf tmpdir

title "Executable not called as databricks"
cp $(command -v $CLI) notdatabricks
trace errcode ./notdatabricks install-dlt || true
rm -f notdatabricks
rm -f dlt
